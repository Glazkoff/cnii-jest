(function(e){function t(t){for(var a,n,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)n=i[l],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var u=r[n];0!==o[u]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},o={app:0},s=[];function n(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"317596eb"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=o[e]=[t,a]}));t.push(r[2]=a);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=n(e);var c=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(l);var r=o[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",c.name="ChunkLoadError",c.type=a,c.request=s,r[1](c)}o[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var m=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"143e":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view")},s=[],n=r("1da1"),i=(r("96cf"),{name:"App",mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=localStorage.getItem("t"),null!==r&&(e.$store.commit("START_APP_LOADING"),e.$store.dispatch("REFRESH_TOKEN").then((function(){e.$store.commit("STOP_APP_LOADING");var t="/";null!=e.$store.state.first_path&&(t=e.$store.state.first_path),e.$route.path!=t&&e.$route.path.substring(0,e.$route.path.length-1)!=t&&e.$router.push({path:t})}),(function(t){e.$store.commit("STOP_APP_LOADING"),"token_not_valid"!=t.code&&console.log("ERROR: ",t)})));case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{}}}),u=i,c=r("2877"),l=Object(c["a"])(u,o,s,!1,null,null,null),m=l.exports,d=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f")),p=r("2f62"),f=r("1232"),h=r("bc3a"),v=r.n(h);a["a"].use(p["a"]);var $=new p["a"].Store({state:{access_token:null,refresh_token:localStorage.getItem("t")||null,first_path:null,loading:!1,successRequestDialog:!1,successSignUpDialog:!1,errorRequestDialog:!1},getters:{decoded:function(e){var t=e.access_token;if(t){var r=Object(f["a"])(t);return r}return null},user_id:function(e){var t=e.access_token;if(t){var r=Object(f["a"])(t);return r.user_id}return null},isAuthenticated:function(e){return null!==e.access_token&&null!==e.refresh_token}},mutations:{SET_ACCESS_TOKEN:function(e,t){e.access_token=t},SET_REFRESH_TOKEN:function(e,t){localStorage.setItem("t",t),e.refresh_token=t},START_APP_LOADING:function(e){e.loading=!0},STOP_APP_LOADING:function(e){e.loading=!1},SET_FIRST_PATH:function(e,t){e.firstPath=t},CLOSE_SUCCESS_DIALOG:function(e){e.successRequestDialog=!1},CLOSE_ERROR_DIALOG:function(e){e.errorRequestDialog=!1},CLOSE_SIGN_UP_DIALOG:function(e){e.successSignUpDialog=!1},OPEN_SUCCESS_DIALOG:function(e){e.successRequestDialog=!0},OPEN_ERROR_DIALOG:function(e){e.errorRequestDialog=!0},OPEN_SIGN_UP_DIALOG:function(e){e.successSignUpDialog=!0}},actions:{LOG_IN:function(e,t){return new Promise((function(r,a){try{v()({url:"/api/auth/login/",method:"POST",data:t}).then((function(t){e.commit("SET_REFRESH_TOKEN",t.data.refresh_token),e.commit("SET_ACCESS_TOKEN",t.data.access_token),r(t.data)})).catch((function(e){a(e.response.data)}))}catch(o){a(o)}}))},SIGN_UP:function(e,t){return e.loading=!0,new Promise((function(r,a){try{v()({url:"/api/auth/registration/",method:"POST",data:t}).then((function(t){e.loading=!1,e.commit("SET_REFRESH_TOKEN",t.data.refresh_token),e.commit("SET_ACCESS_TOKEN",t.data.access_token),r(t.data)})).catch((function(t){e.loading=!1,a(t.response.data)}))}catch(o){e.loading=!1,a(o)}}))},REFRESH_TOKEN:function(e){return new Promise((function(t,r){try{v()({url:"/api/auth/token/refresh/",method:"POST",data:{token:e.refresh_token}}).then((function(r){e.commit("SET_ACCESS_TOKEN",r.data.access),t(r.data)})).catch((function(e){localStorage.clear("t"),r(e.response.data)}))}catch(a){r(a)}}))},LOG_OUT:function(e){return new Promise((function(t,r){try{v()({url:"/api/auth/logout/",method:"POST",data:{}}).then((function(r){e.commit("SET_REFRESH_TOKEN",null),e.commit("SET_ACCESS_TOKEN",null),localStorage.clear("t"),t(r.data)})).catch((function(e){localStorage.clear("t"),r(e.response.data)}))}catch(a){r(a)}}))}},modules:{}}),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"app"}},[r("AppBar",{on:{"change-drawer":e.changeDrawer}}),r("v-navigation-drawer",{attrs:{fixed:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("AppNavDrawer")],1),r("v-main",[e.isAppLoading?r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{"align-center":"align-center","justify-center":"justify-center"}},[r("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:"primary"}})],1)],1):r("router-view")],1)],1)},_=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{app:"",color:"white"}},[a("v-container",{staticClass:"py-0 fill-height"},[a("v-app-bar-nav-icon",{staticClass:"mr-2 d-flex d-sm-none",on:{click:e.changeDrawer}}),a("v-avatar",{staticClass:"mr-2",attrs:{size:"40"}},[a("img",{attrs:{src:r("9b19"),alt:"Лого ЦНИИ Русского жестового языка"}})]),a("v-toolbar-title",{staticClass:"d-none d-sm-none d-md-flex"},[e._v(" ЦНИИ Русского жестового языка ")]),a("v-spacer"),e.isAuthenticated?a("v-btn",{staticClass:"d-none d-sm-flex",attrs:{text:"",to:"/"}},[e._v(" Список заявок ")]):e._e(),e.isAuthenticated?e._e():a("v-btn",{staticClass:"d-none d-sm-flex",attrs:{to:"/login",text:""}},[e._v(" Войти ")]),e.isAuthenticated?e._e():a("v-btn",{staticClass:"d-none d-sm-flex",attrs:{to:"/signup",text:""}},[e._v(" Зарегистрироваться ")]),e.isAuthenticated?a("v-btn",{staticClass:"d-none d-sm-flex",attrs:{text:""},on:{click:e.logOut}},[e._v(" Выйти ")]):e._e()],1)],1)},S=[],y={name:"AppBar",data:function(){return{}},methods:{changeDrawer:function(){this.$emit("change-drawer")},logOut:function(){var e=this;this.$store.dispatch("LOG_OUT").then((function(){e.$router.push("/login")}),(function(e){console.log(e)}))}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}}},q=y,x=r("6544"),E=r.n(x),P=r("40dc"),w=r("5bc1"),k=r("8212"),C=r("8336"),I=r("a523"),j=r("2fa4"),D=r("2a7f"),O=Object(c["a"])(q,b,S,!1,null,"3e4dd56a",null),F=O.exports;E()(O,{VAppBar:P["a"],VAppBarNavIcon:w["a"],VAvatar:k["a"],VBtn:C["a"],VContainer:I["a"],VSpacer:j["a"],VToolbarTitle:D["a"]});var L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list",{attrs:{dense:"",nav:""}},[r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",{staticClass:"text-h6"},[e._v(" ЦНИИ Русского жестового языка ")])],1)],1),r("v-divider"),e.isAuthenticated?r("v-list-item",{attrs:{link:"",to:"/"}},[r("v-list-item-content",[r("v-list-item-title",[e._v("Список заявок")])],1)],1):e._e(),e.isAuthenticated?r("v-list-item",{attrs:{link:""},on:{click:e.logOut}},[r("v-list-item-content",[r("v-list-item-title",[e._v("Выйти")])],1)],1):e._e(),e.isAuthenticated?e._e():r("v-list-item",{attrs:{link:"",to:"/login"}},[r("v-list-item-content",[r("v-list-item-title",[e._v("Войти")])],1)],1),e.isAuthenticated?e._e():r("v-list-item",{attrs:{link:"",to:"/signup"}},[r("v-list-item-content",[r("v-list-item-title",[e._v("Зарегистрироваться")])],1)],1)],1)},T=[],N={name:"AppNavDrawer",methods:{logOut:function(){var e=this;this.$store.dispatch("LOG_OUT").then((function(){e.$router.push("/login")}),(function(e){console.log(e)}))}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}}},A=N,V=r("ce7e"),R=r("8860"),z=r("da13"),U=r("5d23"),G=Object(c["a"])(A,L,T,!1,null,"35905ae5",null),H=G.exports;E()(G,{VDivider:V["a"],VList:R["a"],VListItem:z["a"],VListItemContent:U["a"],VListItemTitle:U["b"]});var M={name:"Main",components:{AppBar:F,AppNavDrawer:H},data:function(){return{drawer:!1}},methods:{changeDrawer:function(){this.drawer=!this.drawer}},computed:{isAppLoading:function(){return this.$store.state.loading}}},Q=M,B=r("7496"),Y=r("a722"),J=r("f6c4"),K=r("f774"),W=r("490a"),X=Object(c["a"])(Q,g,_,!1,null,"77589291",null),Z=X.exports;E()(X,{VApp:B["a"],VContainer:I["a"],VLayout:Y["a"],VMain:J["a"],VNavigationDrawer:K["a"],VProgressCircular:W["a"]});var ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{"align-center":"align-center","justify-center":"justify-center"}},[r("router-view")],1)],1)},te=[],re={name:"Auth"},ae=re,oe=(r("5bd6"),Object(c["a"])(ae,ee,te,!1,null,"02973c8c",null)),se=oe.exports;E()(oe,{VContainer:I["a"],VLayout:Y["a"]});var ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-flex",{staticClass:"auth-form text-center"},[r("SuccessSignUpDialog",{on:{close:function(t){return e.$store.commit("CLOSE_SIGN_UP_DIALOG")}}}),r("h1",{staticClass:"mb-12"},[e._v("Авторизация")]),r("v-card",{attrs:{flat:"",light:"light"}},[r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{outlined:"",disabled:e.formLoading,light:"light",label:"E-mail",type:"email",color:"primary",autocomplete:"email",required:"","error-messages":e.emailErrors},on:{input:function(t){e.$v.form.email.$touch(),e.requestErrors=[]},blur:function(t){e.$v.form.email.$touch(),e.requestErrors=[]}},model:{value:e.$v.form.email.$model,callback:function(t){e.$set(e.$v.form.email,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.email.$model"}}),r("v-text-field",{attrs:{outlined:"",disabled:e.formLoading,light:"light",label:"Пароль",type:e.passShow?"text":"password",color:"primary","append-icon":e.passShow?"mdi-eye":"mdi-eye-off",autocomplete:"current-password",required:"","error-messages":e.passwordErrors},on:{"click:append":function(t){e.passShow=!e.passShow},input:function(t){e.$v.form.password.$touch(),e.requestErrors=[]},blur:function(t){e.$v.form.password.$touch(),e.requestErrors=[]}},model:{value:e.$v.form.password.$model,callback:function(t){e.$set(e.$v.form.password,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.password.$model"}}),r("v-btn",{staticClass:"mt-8 my-button wide-padding white--text",attrs:{color:"primary",block:"block",type:"submit",disabled:e.$v.form.$invalid||e.formLoading,loading:e.formLoading},on:{click:function(t){return t.preventDefault(),e.logIn(t)}}},[e._v(" Войти ")])],1)],1)],1),r("div",{staticClass:"darkBlue--text"},[e._v(" Ещё нет аккаунта? "),r("router-link",{staticClass:"link",attrs:{to:"/signup",disabled:e.formLoading}},[e._v("Зарегистрируйтесь!")])],1)],1)},ie=[],ue=r("5530"),ce=(r("159b"),r("b5ae")),le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500"},model:{value:e.innerDialog,callback:function(t){e.innerDialog=t},expression:"innerDialog"}},[r("v-card",[r("v-card-text",{staticClass:"pt-4"},[r("div",{staticClass:"text-center pb-2"},[r("v-icon",{attrs:{"x-large":"",color:"success"}},[e._v(" mdi-check-circle-outline ")])],1),r("div",{staticClass:"text-center mt-2"},[r("h2",{staticClass:"mb-2"},[e._v("Вы успешно зарегистрировались!")]),r("p",[e._v(" На вашу электронную почту отправлено письмо перейдите по ссылке, чтобы подтвердить регистрацию ")])])]),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Закрыть ")])],1)],1)],1)],1)},me=[],de={name:"SuccessSignUpDialog",data:function(){return{innerDialog:this.$store.state.successSignUpDialog}},watch:{"$store.state.successSignUpDialog":function(){this.innerDialog=this.$store.state.successSignUpDialog}}},pe=de,fe=r("b0af"),he=r("99d9"),ve=r("169a"),$e=r("132d"),ge=Object(c["a"])(pe,le,me,!1,null,"4bee3c78",null),_e=ge.exports;E()(ge,{VBtn:C["a"],VCard:fe["a"],VCardActions:he["a"],VCardText:he["b"],VDialog:ve["a"],VDivider:V["a"],VIcon:$e["a"],VSpacer:j["a"]});var be={name:"LogIn",components:{SuccessSignUpDialog:_e},data:function(){return{passShow:!1,formLoading:!1,form:{email:"",password:""},requestErrors:[]}},validations:{form:{email:{required:ce["required"],email:ce["email"]},password:{required:ce["required"]}}},computed:{emailErrors:function(){var e=[];return this.$v.form.email.$dirty?(!this.$v.form.email.email&&e.push("Введите корректный e-mail"),!this.$v.form.email.required&&e.push("Укажите ваш e-mail"),this.requestErrors.length>0&&this.requestErrors.forEach((function(t){e.push(t)})),e):e},passwordErrors:function(){var e=[];return this.$v.form.password.$dirty?(!this.$v.form.password.required&&e.push("Укажите пароль!"),this.requestErrors.length>0&&this.requestErrors.forEach((function(t){e.push(t)})),e):e}},methods:{logIn:function(){var e=this,t=Object(ue["a"])({},this.form);this.formLoading=!0,this.$store.dispatch("LOG_IN",t).then((function(){e.formLoading=!1,e.$router.push("/")}),(function(t){if(e.formLoading=!1,t.non_field_errors)for(var r=0;r<t.non_field_errors.length;r++)e.requestErrors.push(t.non_field_errors[r])}))}}},Se=be,ye=r("0e8f"),qe=r("4bd4"),xe=r("8654"),Ee=Object(c["a"])(Se,ne,ie,!1,null,"5a36a518",null),Pe=Ee.exports;E()(Ee,{VBtn:C["a"],VCard:fe["a"],VCardText:he["b"],VFlex:ye["a"],VForm:qe["a"],VTextField:xe["a"]});var we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-flex",{staticClass:"auth-form text-center"},[r("h1",{staticClass:"mb-12"},[e._v("Регистрация")]),r("v-card",{attrs:{flat:"",light:"light"}},[r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{outlined:"",disabled:e.formLoading,light:"light",label:"E-mail",type:"email",color:"primary",autocomplete:"email",required:"","error-messages":e.emailErrors},on:{input:function(t){e.$v.form.email.$touch(),e.requestErrors=[],e.requestEmailErrors=[]},blur:function(t){e.$v.form.email.$touch(),e.requestErrors=[],e.requestEmailErrors=[]}},model:{value:e.$v.form.email.$model,callback:function(t){e.$set(e.$v.form.email,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.email.$model"}}),r("v-text-field",{attrs:{outlined:"",disabled:e.formLoading,light:"light",label:"Пароль",type:e.passShow?"text":"password",color:"primary","append-icon":e.passShow?"mdi-eye":"mdi-eye-off",autocomplete:"new-password",required:"",counter:"","error-count":"3","error-messages":e.password1Errors},on:{"click:append":function(t){e.passShow=!e.passShow},input:function(t){e.$v.form.password1.$touch(),e.requestErrors=[],e.requestPassword1Errors=[]},blur:function(t){e.$v.form.password1.$touch(),e.requestErrors=[],e.requestPassword1Errors=[]}},model:{value:e.$v.form.password1.$model,callback:function(t){e.$set(e.$v.form.password1,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.password1.$model"}}),r("v-text-field",{attrs:{outlined:"",disabled:e.formLoading,light:"light",label:"Повторите пароль",type:e.pass2Show?"text":"password",color:"primary","append-icon":e.pass2Show?"mdi-eye":"mdi-eye-off",autocomplete:"new-password",required:"",counter:"","error-count":"3","error-messages":e.password2Errors},on:{"click:append":function(t){e.pass2Show=!e.pass2Show},input:function(t){e.$v.form.password2.$touch(),e.requestErrors=[],e.requestPassword2Errors=[]},blur:function(t){e.$v.form.password2.$touch(),e.requestErrors=[],e.requestPassword2Errors=[]}},model:{value:e.$v.form.password2.$model,callback:function(t){e.$set(e.$v.form.password2,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.password2.$model"}}),r("v-btn",{staticClass:"mt-8 my-button wide-padding white--text",attrs:{color:"primary",block:"block",type:"submit",disabled:e.$v.form.$invalid||e.formLoading,loading:e.formLoading},on:{click:function(t){return t.preventDefault(),e.signUp(t)}}},[e._v(" Зарегистрироваться ")])],1)],1)],1),r("div",{staticClass:"darkBlue--text"},[e._v(" Уже есть аккаунт? "),r("router-link",{staticClass:"link",attrs:{to:"/login",disabled:e.formLoading}},[e._v("Войдите!")])],1)],1)},ke=[],Ce={name:"SignUp",data:function(){return{passShow:!1,pass2Show:!1,formLoading:!1,form:{email:"",password1:"",password2:""},requestErrors:[],requestEmailErrors:[],requestPassword1Errors:[],requestPassword2Errors:[]}},validations:{form:{email:{required:ce["required"],email:ce["email"]},password1:{required:ce["required"],minLength:Object(ce["minLength"])(8)},password2:{required:ce["required"],sameAsPassword:Object(ce["sameAs"])("password1")}}},computed:{emailErrors:function(){var e=[];return this.$v.form.email.$dirty?(!this.$v.form.email.email&&e.push("Введите корректный e-mail"),!this.$v.form.email.required&&e.push("Укажите ваш e-mail"),this.requestErrors.length>0&&this.requestErrors.forEach((function(t){e.push(t)})),this.requestEmailErrors.length>0&&this.requestEmailErrors.forEach((function(t){e.push(t)})),e):e},password1Errors:function(){var e=[];return this.$v.form.password1.$dirty?(!this.$v.form.password1.required&&e.push("Укажите пароль!"),!this.$v.form.password1.minLength&&e.push("Пароль должен содержать минимум 8 символов!"),this.requestErrors.length>0&&this.requestErrors.forEach((function(t){e.push(t)})),this.requestPassword1Errors.length>0&&this.requestPassword1Errors.forEach((function(t){e.push(t)})),e):e},password2Errors:function(){var e=[];return this.$v.form.password2.$dirty?(!this.$v.form.password2.required&&e.push("Укажите пароль!"),!this.$v.form.password2.sameAsPassword&&e.push("Пароли должны совпадать!"),this.requestErrors.length>0&&this.requestErrors.forEach((function(t){e.push(t)})),this.requestPassword2Errors.length>0&&this.requestPassword2Errors.forEach((function(t){e.push(t)})),e):e}},methods:{signUp:function(){var e=this,t=Object(ue["a"])({},this.form);this.formLoading=!0,this.$store.dispatch("SIGN_UP",t).then((function(){e.formLoading=!1,e.$store.commit("OPEN_SIGN_UP_DIALOG"),e.$router.push("/login")}),(function(t){if(console.log("errors: ",t),e.formLoading=!1,t.non_field_errors)for(var r=0;r<t.non_field_errors.length;r++)e.requestErrors.push(t.non_field_errors[r]);if(t.email)for(var a=0;a<t.email.length;a++)e.requestEmailErrors.push(t.email[a]);if(t.password1)for(var o=0;o<t.password1.length;o++)e.requestPassword1Errors.push(t.password1[o]);if(t.password2)for(var s=0;s<t.password2.length;s++)e.requestPassword2Errors.push(t.password2[s])}))}}},Ie=Ce,je=Object(c["a"])(Ie,we,ke,!1,null,"918b0abe",null),De=je.exports;E()(je,{VBtn:C["a"],VCard:fe["a"],VCardText:he["b"],VFlex:ye["a"],VForm:qe["a"],VTextField:xe["a"]});var Oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("router-view")],1)},Fe=[],Le={name:"UserStatusScreen"},Te=Le,Ne=Object(c["a"])(Te,Oe,Fe,!1,null,"badb727c",null),Ae=Ne.exports;E()(Ne,{VContainer:I["a"]});var Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"mb-2"},[e._v("Данные для аттестации")]),this.$apollo.queries.request.loading||e.stepperLoading?r("v-layout",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{"align-center":"","d-flex":"","fill-height":"","justify-center":"",wrap:""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1):r("v-stepper",{attrs:{vertical:""},model:{value:e.stepperStatus,callback:function(t){e.stepperStatus=t},expression:"stepperStatus"}},[r("v-stepper-step",{attrs:{step:"1",complete:e.stepperStatus>=1}},[e._v(" Шаг 1. Личные данные ")]),r("v-stepper-content",{attrs:{step:"1"}},[r("ProfileStep1",{on:{goToNextStep:function(t){e.stepperStatus=2}}})],1),r("v-stepper-step",{attrs:{step:"2",complete:e.stepperStatus>=2}},[e._v(" Шаг 2. Общая информация ")]),r("v-stepper-content",{attrs:{step:"2"}},[r("ProfileStep2",{on:{goToPrevStep:function(t){e.stepperStatus=1},goToNextStep:function(t){e.stepperStatus=3}}})],1),r("v-stepper-step",{attrs:{step:"3",complete:e.stepperStatus>=3}},[e._v(" Шаг 3. Паспортные данные ")]),r("v-stepper-content",{attrs:{step:"3"}},[r("ProfileStep3",{on:{goToPrevStep:function(t){e.stepperStatus=2},goToNextStep:function(t){e.stepperStatus=4}}})],1),r("v-stepper-step",{attrs:{step:"4",complete:e.stepperStatus>=4}},[e._v(" Шаг 4. Контактные данные ")]),r("v-stepper-content",{attrs:{step:"4"}},[r("ProfileStep4",{on:{goToPrevStep:function(t){e.stepperStatus=3},goToNextStep:function(t){e.stepperStatus=5}}})],1),r("v-stepper-step",{attrs:{step:"5",complete:e.stepperStatus>=5}},[e._v(" Шаг 5. Опыт работы и награды ")]),r("v-stepper-content",{attrs:{step:"5"}},[r("ProfileStep5",{on:{goToPrevStep:function(t){e.stepperStatus=4},goToNextStep:function(t){e.stepperStatus=6}}})],1),r("v-stepper-step",{attrs:{step:"6",complete:e.stepperStatus>=6}},[e._v(" Шаг 6. Теоретическая часть аттестации ")]),r("v-stepper-content",{attrs:{step:"6"}},[r("ProfileStep6",{on:{goToPrevStep:function(t){e.stepperStatus=5},goToNextStep:function(t){return e.finishEditing()}}})],1)],1)],1)},Re=[],ze=(r("c740"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.$apollo.queries.user.loading||e.circleLoading?r("div",[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{label:"Фамилия",autocomplete:"surname","error-messages":e.surnameErrors,required:""},on:{input:function(t){e.$v.form.surname.$touch(),e.sendForm()},blur:function(t){e.$v.form.surname.$touch(),e.sendForm()}},model:{value:e.$v.form.surname.$model,callback:function(t){e.$set(e.$v.form.surname,"$model",t)},expression:"$v.form.surname.$model"}}),r("v-text-field",{attrs:{label:"Имя",autocomplete:"name","error-messages":e.nameErrors,required:""},on:{input:function(t){e.$v.form.name.$touch(),e.sendForm()},blur:function(t){e.$v.form.name.$touch(),e.sendForm()}},model:{value:e.$v.form.name.$model,callback:function(t){e.$set(e.$v.form.name,"$model",t)},expression:"$v.form.name.$model"}}),r("v-text-field",{attrs:{label:"Отчество",autocomplete:"patricity","error-messages":e.patricityErrors,required:""},on:{input:function(t){e.$v.form.patricity.$touch(),e.sendForm()},blur:function(t){e.$v.form.patricity.$touch(),e.sendForm()}},model:{value:e.$v.form.patricity.$model,callback:function(t){e.$set(e.$v.form.patricity,"$model",t)},expression:"$v.form.patricity.$model"}}),r("DatePicker",{attrs:{label:"Дата рождения",autocomplete:"date_of_birth",disabled:e.formLoading,errors:e.dateErrors,predefined:e.predefinedBirthday,max:(new Date).toISOString().slice(0,10)},on:{update:function(t){e.$v.form.birthday.$model=t,e.sendForm()}}}),r("v-select",{attrs:{items:[{text:"Мужской",value:"M"},{text:"Женский",value:"F"}],"item-text":"text","item-value":"value",label:"Пол",autocomplete:"sex","error-messages":e.sexErrors},on:{input:function(t){e.$v.form.sex.$touch(),e.sendForm()},blur:function(t){e.$v.form.sex.$touch(),e.sendForm()}},model:{value:e.$v.form.sex.$model,callback:function(t){e.$set(e.$v.form.sex,"$model",t)},expression:"$v.form.sex.$model"}}),e.user.photo&&!e.uploadPhoto?r("div",[r("small",[e._v("Ваше фото")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadPhoto=!0,e.user.photo=null,e.$v.form.photo.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.user.photo,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{staticClass:"mb-2",attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Прикрепите ваше фото",label:"Ваше фото","prepend-icon":"mdi-camera",messages:["Загрузите в формате png, jpeg, jpg, pjp, pjpeg, jfif, bmp"],"error-messages":e.photoErrors},on:{input:function(t){e.$v.form.photo.$touch(),e.sendForm()},blur:function(t){e.$v.form.photo.$touch(),e.sendForm()}},model:{value:e.$v.form.photo.$model,callback:function(t){e.$set(e.$v.form.photo,"$model",t)},expression:"$v.form.photo.$model"}})],1),this.$apollo.queries.user.loading||e.circleLoading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{color:"primary",disabled:e.$v.form.$anyError},on:{click:e.goToNextStep}},[e._v(" Далее ")])],1)}),Ue=[],Ge=(r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[r("v-text-field",e._g(e._b({directives:[{name:"mask",rawName:"v-mask",value:"##.##.####",expression:"'##.##.####'"}],attrs:{label:e.label,"persistent-hint":"","prepend-icon":"mdi-calendar",autocomplete:e.autocomplete,color:"colorOfSea",required:"","error-messages":e.errors},on:{blur:function(t){e.date=e.parseDate(e.dateFormatted),e.$v.dateFormatted.$touch()},input:function(t){return e.$v.dateFormatted.$touch()}},model:{value:e.$v.dateFormatted.$model,callback:function(t){e.$set(e.$v.dateFormatted,"$model","string"===typeof t?t.trim():t)},expression:"$v.dateFormatted.$model"}},"v-text-field",o,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{attrs:{"no-title":"",color:"colorOfSea",max:e.max,min:e.min},on:{input:function(t){e.menu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)}),He=[],Me=r("3835"),Qe=(r("ac1f"),r("1276"),r("99af"),r("4d90"),r("1dce")),Be=r.n(Qe),Ye={mixins:[Qe["validationMixin"]],name:"DatePicker",props:["label","autocomplete","errors","predefined","max","min"],validations:{dateFormatted:{required:ce["required"]}},data:function(){return{date:this.predefined,dateFormatted:null,menu:!1}},computed:{computedDateFormatted:function(){return this.formatDate(this.date)}},watch:{date:function(e){this.dateFormatted=this.formatDate(e);var t=this.parseDate(e);this.$emit("update",t)},predefined:function(e){e&&(this.date=e,this.$v.dateFormatted.$model=this.formatDate(e))}},mounted:function(){this.predefined&&(this.$v.dateFormatted.$model=this.formatDate(this.predefined))},methods:{formatDate:function(e){if(!e)return null;var t=e.split("-"),r=Object(Me["a"])(t,3),a=r[0],o=r[1],s=r[2];return"".concat(s,".").concat(o,".").concat(a)},parseDate:function(e){if(!e)return null;if(3==e.split(".").length){var t=e.split("."),r=Object(Me["a"])(t,3),a=r[0],o=r[1],s=r[2];return"".concat(s,"-").concat(o.padStart(2,"0"),"-").concat(a.padStart(2,"0"))}return e}}},Je=Ye,Ke=r("2e4b"),We=r("e449"),Xe=Object(c["a"])(Je,Ge,He,!1,null,"3e6d9172",null),Ze=Xe.exports;E()(Xe,{VDatePicker:Ke["a"],VMenu:We["a"],VTextField:xe["a"]});var et,tt,rt,at,ot,st,nt,it,ut,ct,lt,mt,dt,pt,ft,ht,vt,$t,gt,_t=r("8785"),bt=r("5184"),St=Object(bt["a"])(et||(et=Object(_t["a"])(["\n  mutation (\n    $userId: ID!\n    $surname: String\n    $name: String\n    $birthday: Date\n    $sex: String\n    $patricity: String\n    $photo: Upload\n  ) {\n    setFirstProfilePart(\n      userId: $userId\n      surname: $surname\n      name: $name\n      birthday: $birthday\n      sex: $sex\n      patricity: $patricity\n      photo: $photo\n    ) {\n      user {\n        id\n        name\n        surname\n        patricity\n        sex\n        birthday\n        photo\n      }\n    }\n  }\n"]))),yt=Object(bt["a"])(tt||(tt=Object(_t["a"])(["\n  mutation (\n    $userId: ID!\n    $nativeLanguage: String\n    $citizenship: String\n    $martialStatus: String\n    $organization: String\n    $jobPosition: String\n    $education: String\n    $mainDiplomaScan: Upload\n    $gestureDiplomaScan: Upload\n  ) {\n    setSecondProfilePart(\n      userId: $userId\n      nativeLanguage: $nativeLanguage\n      citizenship: $citizenship\n      martialStatus: $martialStatus\n      organization: $organization\n      jobPosition: $jobPosition\n      education: $education\n      mainDiplomaScan: $mainDiplomaScan\n      gestureDiplomaScan: $gestureDiplomaScan\n    ) {\n      user {\n        id\n        nativeLanguage\n        citizenship\n        martialStatus\n        organization\n        jobPosition\n        education\n        mainDiplomaScan\n        gestureDiplomaScan\n      }\n    }\n  }\n"]))),qt=Object(bt["a"])(rt||(rt=Object(_t["a"])(["\n  mutation (\n    $userId: ID!\n    $passport: String\n    $passportPart1Scan: Upload\n    $passportPart2Scan: Upload\n  ) {\n    setThirdProfilePart(\n      userId: $userId\n      passport: $passport\n      passportPart1Scan: $passportPart1Scan\n      passportPart2Scan: $passportPart2Scan\n    ) {\n      user {\n        id\n        passport\n        passportPart1Scan\n        passportPart2Scan\n      }\n    }\n  }\n"]))),xt=Object(bt["a"])(at||(at=Object(_t["a"])(["\n  mutation (\n    $userId: ID!\n    $homeAddress: String\n    $personalPhone: String\n    $homePhone: String\n    $workPhone: String\n  ) {\n    setFourthProfilePart(\n      userId: $userId\n      homeAddress: $homeAddress\n      personalPhone: $personalPhone\n      homePhone: $homePhone\n      workPhone: $workPhone\n    ) {\n      user {\n        id\n        homeAddress\n        personalPhone\n        homePhone\n        workPhone\n      }\n    }\n  }\n"]))),Et=Object(bt["a"])(ot||(ot=Object(_t["a"])(["\n  mutation (\n    $userId: ID!\n    $fullWorkExperienceStartYear: Int\n    $currentJobExperienceStartYear: Int\n    $awards: String\n    $training: String\n    $organizationMembership: String\n    $characteristic: Upload\n    $employmentHistory: Upload\n  ) {\n    setFifthProfilePart(\n      userId: $userId\n      fullWorkExperienceStartYear: $fullWorkExperienceStartYear\n      currentJobExperienceStartYear: $currentJobExperienceStartYear\n      awards: $awards\n      training: $training\n      organizationMembership: $organizationMembership\n      characteristic: $characteristic\n      employmentHistory: $employmentHistory\n    ) {\n      user {\n        id\n        fullWorkExperienceStartYear\n        currentJobExperienceStartYear\n        awards\n        training\n        organizationMembership\n        characteristic\n        employmentHistory\n      }\n    }\n  }\n"]))),Pt=Object(bt["a"])(st||(st=Object(_t["a"])(["\n  mutation (\n    $userId: ID!\n    $requestId: ID!\n    $attestationCertificateNumber: String\n    $attestationCertificateDate: Date\n    $attestationCertificateScan: Upload\n    $cheque: Upload\n  ) {\n    setSixthProfilePart(\n      userId: $userId\n      requestId: $requestId\n      attestationCertificateNumber: $attestationCertificateNumber\n      attestationCertificateDate: $attestationCertificateDate\n      attestationCertificateScan: $attestationCertificateScan\n      cheque: $cheque\n    ) {\n      user {\n        id\n        attestationCertificateNumber\n        attestationCertificateDate\n        attestationCertificateScan\n      }\n      request {\n        id\n        status\n        cheque\n      }\n    }\n  }\n"]))),wt=Object(bt["a"])(nt||(nt=Object(_t["a"])(["\n  mutation ($requestId: ID!, $statusNumber: Int!) {\n    updateRequestStatus(requestId: $requestId, statusNumber: $statusNumber) {\n      request {\n        id\n        status\n      }\n    }\n  }\n"]))),kt=Object(bt["a"])(it||(it=Object(_t["a"])(["\n  mutation ($requestId: ID!) {\n    finishRequest(requestId: $requestId) {\n      request {\n        id\n        status\n      }\n      register {\n        id\n        requestNumber\n      }\n    }\n  }\n"]))),Ct=Object(bt["a"])(ut||(ut=Object(_t["a"])(["\n  mutation ($userId: ID!) {\n    startNewRequest(userId: $userId) {\n      request {\n        id\n        requestNumber\n        status\n        comment\n      }\n    }\n  }\n"]))),It=Object(bt["a"])(ct||(ct=Object(_t["a"])(["\n  mutation ($requestId: ID!) {\n    deleteRequest(requestId: $requestId) {\n      ok\n    }\n  }\n"]))),jt=Object(bt["a"])(lt||(lt=Object(_t["a"])(["\n  query ($userId: ID!) {\n    user(userId: $userId) {\n      id\n      surname\n      name\n      patricity\n      birthday\n      sex\n      photo\n    }\n  }\n"]))),Dt=Object(bt["a"])(mt||(mt=Object(_t["a"])(["\n  query ($userId: ID!) {\n    user(userId: $userId) {\n      id\n      nativeLanguage\n      citizenship\n      martialStatus\n      organization\n      jobPosition\n      education\n      mainDiplomaScan\n      gestureDiplomaScan\n    }\n  }\n"]))),Ot=Object(bt["a"])(dt||(dt=Object(_t["a"])(["\n  query ($userId: ID!) {\n    user(userId: $userId) {\n      id\n      passport\n      passportPart1Scan\n      passportPart2Scan\n    }\n  }\n"]))),Ft=Object(bt["a"])(pt||(pt=Object(_t["a"])(["\n  query ($userId: ID!) {\n    user(userId: $userId) {\n      id\n      homeAddress\n      personalPhone\n      homePhone\n      workPhone\n    }\n  }\n"]))),Lt=Object(bt["a"])(ft||(ft=Object(_t["a"])(["\n  query ($userId: ID!) {\n    user(userId: $userId) {\n      id\n      fullWorkExperienceStartYear\n      currentJobExperienceStartYear\n      awards\n      training\n      organizationMembership\n      characteristic\n      employmentHistory\n    }\n  }\n"]))),Tt=Object(bt["a"])(ht||(ht=Object(_t["a"])(["\n  query ($userId: ID!, $requestId: ID!) {\n    user(userId: $userId) {\n      id\n      attestationCertificateNumber\n      attestationCertificateDate\n      attestationCertificateScan\n    }\n    request(requestId: $requestId) {\n      id\n      cheque\n    }\n  }\n"]))),Nt=Object(bt["a"])(vt||(vt=Object(_t["a"])(["\n  query ($userId: ID!) {\n    userRequests(userId: $userId) {\n      id\n      requestNumber\n      status\n      comment\n    }\n  }\n"]))),At=Object(bt["a"])($t||($t=Object(_t["a"])(["\n  query ($requestId: ID!) {\n    request(requestId: $requestId) {\n      id\n      status\n    }\n  }\n"]))),Vt=Object(bt["a"])(gt||(gt=Object(_t["a"])(["\n  query ($requestId: ID!) {\n    request(requestId: $requestId) {\n      id\n      cheque\n    }\n  }\n"]))),Rt={name:"ProfileStep1",components:{DatePicker:Ze},data:function(){return{formLoading:!1,circleLoading:!1,uploadPhoto:!1,form:{surname:null,name:null,patricity:null,birthday:null,sex:null,photo:null}}},apollo:{user:{query:jt,variables:function(){return{userId:this.$store.getters.user_id}}}},watch:{user:function(e){e&&(e.surname&&(this.$v.form.$model.surname=e.surname),e.name&&(this.$v.form.$model.name=e.name),e.patricity&&(this.$v.form.$model.patricity=e.patricity),e.sex&&(this.$v.form.$model.sex=e.sex),e.birthday&&(this.$v.form.$model.birthday=e.birthday))}},validations:{form:{surname:{required:ce["required"]},name:{required:ce["required"]},patricity:{},birthday:{required:ce["required"]},sex:{required:ce["required"]},photo:{required:Object(ce["requiredIf"])((function(){return void 0==this.user||(!this.user.photo||this.uploadPhoto)}))}}},computed:{surnameErrors:function(){var e=[];return this.$v.form.surname.$dirty?(!this.$v.form.surname.required&&e.push("Поле 'Фамилия' обязательно!"),e):e},nameErrors:function(){var e=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&e.push("Поле 'Имя' обязательно!"),e):e},patricityErrors:function(){var e=[];return this.$v.form.patricity.$dirty,e},sexErrors:function(){var e=[];return this.$v.form.sex.$dirty?((!this.$v.form.sex.required||"N"==this.$v.form.sex.$model)&&e.push("Поле 'Пол' обязательно"),e):e},dateErrors:function(){var e=[];return this.$v.form.birthday.$dirty?(!this.$v.form.birthday.required&&e.push("Поле 'Дата рождения' обязательно"),e):e},photoErrors:function(){var e=[];return this.$v.form.photo.$dirty?(void 0!=this.user&&!this.$v.form.photo.required&&(null==this.$v.form.photo.$model||""==this.$v.form.photo.$model||!this.uploadPhoto)&&e.push("Поле 'Фото' обязательно"),e):e},predefinedBirthday:function(){return this.user&&this.user.birthday?this.user.birthday:null}},methods:{sendCurrentStep:function(e){var t=this;return new Promise((function(r,a){t.$apollo.mutate({mutation:wt,variables:{requestId:t.$route.params.id,statusNumber:e},update:function(e,r){var a=r.data.updateRequestStatus,o=e.readQuery({query:Nt,variables:{userId:t.$store.getters.user_id}}),s=o.userRequests.findIndex((function(e){e.id,a.request.id}));-1!=s&&(o.userRequests[s].status=a.request.status),e.writeQuery({query:Nt,variables:{userId:t.$store.getters.user_id},data:o})}}).then((function(){r()})).catch((function(){a()}))}))},goToNextStep:function(){var e=this;this.$v.form.$touch(),this.$v.form.$anyError||(this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(2).finally((function(){e.$emit("goToNextStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1})))},sendForm:function(){var e=this;return this.$v.form.$model.photo&&(this.uploadPhoto=!1),new Promise((function(t,r){e.$apollo.mutate({mutation:St,variables:{userId:e.$store.getters.decoded.user_id,surname:e.$v.form.$model.surname,name:e.$v.form.$model.name,birthday:e.$v.form.$model.birthday,sex:e.$v.form.$model.sex,patricity:e.$v.form.$model.patricity,photo:e.$v.form.$model.photo},update:function(t,r){var a=r.data.setFirstProfilePart,o=t.readQuery({query:jt,variables:{userId:e.$store.getters.user_id}});o.user.surname=a.user.surname,o.user.name=a.user.name,o.user.patricity=a.user.patricity,o.user.birthday=a.user.birthday,o.user.sex=a.user.sex,o.user.photo=a.user.photo,t.writeQuery({query:jt,variables:{userId:e.$store.getters.user_id},data:o})}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))}}},zt=Rt,Ut=r("23a7"),Gt=r("adda"),Ht=r("0fd9"),Mt=r("b974"),Qt=Object(c["a"])(zt,ze,Ue,!1,null,"197752cc",null),Bt=Qt.exports;E()(Qt,{VBtn:C["a"],VFileInput:Ut["a"],VForm:qe["a"],VImg:Gt["a"],VProgressCircular:W["a"],VRow:Ht["a"],VSelect:Mt["a"],VTextField:xe["a"]});var Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.$apollo.queries.user.loading||e.circleLoading1||e.circleLoading2?r("div",[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{label:"Родной язык",autocomplete:"language","error-messages":e.nativeLanguageErrors,required:""},on:{input:function(t){e.$v.form.native_language.$touch(),e.sendForm()},blur:function(t){e.$v.form.native_language.$touch(),e.sendForm()}},model:{value:e.$v.form.native_language.$model,callback:function(t){e.$set(e.$v.form.native_language,"$model",t)},expression:"$v.form.native_language.$model"}}),r("v-text-field",{attrs:{label:"Гражданство",autocomplete:"citizenship","error-messages":e.citizenshipErrors,required:""},on:{input:function(t){e.$v.form.citizenship.$touch(),e.sendForm()},blur:function(t){e.$v.form.citizenship.$touch(),e.sendForm()}},model:{value:e.$v.form.citizenship.$model,callback:function(t){e.$set(e.$v.form.citizenship,"$model",t)},expression:"$v.form.citizenship.$model"}}),r("v-text-field",{attrs:{label:"Семейное положение",autocomplete:"martial_status","error-messages":e.martialStatusErrors,required:""},on:{input:function(t){e.$v.form.martial_status.$touch(),e.sendForm()},blur:function(t){e.$v.form.martial_status.$touch(),e.sendForm()}},model:{value:e.$v.form.martial_status.$model,callback:function(t){e.$set(e.$v.form.martial_status,"$model",t)},expression:"$v.form.martial_status.$model"}}),r("v-text-field",{attrs:{label:"Организация",autocomplete:"organization","error-messages":e.organizationErrors,required:""},on:{input:function(t){e.$v.form.organization.$touch(),e.sendForm()},blur:function(t){e.$v.form.organization.$touch(),e.sendForm()}},model:{value:e.$v.form.organization.$model,callback:function(t){e.$set(e.$v.form.organization,"$model",t)},expression:"$v.form.organization.$model"}}),r("v-text-field",{attrs:{label:"Занимаемая должность",autocomplete:"job_position","error-messages":e.jobPositionErrors,required:""},on:{input:function(t){e.$v.form.job_position.$touch(),e.sendForm()},blur:function(t){e.$v.form.job_position.$touch(),e.sendForm()}},model:{value:e.$v.form.job_position.$model,callback:function(t){e.$set(e.$v.form.job_position,"$model",t)},expression:"$v.form.job_position.$model"}}),r("v-text-field",{attrs:{label:"Образование",autocomplete:"education","error-messages":e.educationErrors,required:""},on:{input:function(t){e.$v.form.education.$touch(),e.sendForm()},blur:function(t){e.$v.form.education.$touch(),e.sendForm()}},model:{value:e.$v.form.education.$model,callback:function(t){e.$set(e.$v.form.education,"$model",t)},expression:"$v.form.education.$model"}}),e.user.mainDiplomaScan&&!e.uploadMainDiplomaScan?r("div",{staticClass:"mb-4"},[r("small",[e._v("Скан диплома об образовании")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadMainDiplomaScan=!0,e.user.mainDiplomaScan=null,e.$v.form.main_diploma_scan.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.user.mainDiplomaScan,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{staticClass:"mb-2",attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Прикрепите скан",label:"Скан диплома об образовании","prepend-icon":"mdi-camera",messages:["Загрузите в формате png, jpeg, jpg, pjp, pjpeg, jfif, bmp"],"error-messages":e.mainDiplomaErrors},on:{input:function(t){return e.sendForm()},blur:function(t){return e.sendForm()}},model:{value:e.$v.form.main_diploma_scan.$model,callback:function(t){e.$set(e.$v.form.main_diploma_scan,"$model",t)},expression:"$v.form.main_diploma_scan.$model"}}),e.user.gestureDiplomaScan&&!e.uploadGestureDiplomaScan?r("div",{staticClass:"mb-2"},[r("small",[e._v("Скан диплома о подготовке по жестовому языку")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadGestureDiplomaScan=!0,e.user.gestureDiplomaScan=null,e.$v.form.gesture_diploma_scan.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.user.gestureDiplomaScan,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Прикрепите скан",label:"Скан диплома о подготовке по жестовому языку","prepend-icon":"mdi-camera",messages:["Загрузите в формате png, jpeg, jpg, pjp, pjpeg, jfif, bmp"],"error-messages":e.gestureDiplomaErrors},on:{input:function(t){e.$v.form.gesture_diploma_scan.$touch(),e.sendForm()},blur:function(t){e.$v.form.gesture_diploma_scan.$touch(),e.sendForm()}},model:{value:e.$v.form.gesture_diploma_scan.$model,callback:function(t){e.$set(e.$v.form.gesture_diploma_scan,"$model",t)},expression:"$v.form.gesture_diploma_scan.$model"}})],1),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{color:"primary",disabled:e.$v.form.$anyError},on:{click:e.goToNextStep}},[e._v(" Далее ")]),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{text:"",disabled:e.$v.form.$anyError},on:{click:e.goToPrevStep}},[e._v(" Назад ")])],1)},Jt=[],Kt={name:"ProfileStep2",data:function(){return{formLoading:!1,circleLoading1:!1,circleLoading2:!1,uploadMainDiplomaScan:!1,uploadGestureDiplomaScan:!1,form:{native_language:null,citizenship:null,martial_status:null,organization:null,job_position:null,education:null,main_diploma_scan:null,gesture_diploma_scan:null}}},apollo:{user:{query:Dt,variables:function(){return{userId:this.$store.getters.user_id}}}},watch:{user:function(e){e&&(e.nativeLanguage&&(this.$v.form.$model.native_language=e.nativeLanguage),e.citizenship&&(this.$v.form.$model.citizenship=e.citizenship),e.martialStatus&&(this.$v.form.$model.martial_status=e.martialStatus),e.organization&&(this.$v.form.$model.organization=e.organization),e.jobPosition&&(this.$v.form.$model.job_position=e.jobPosition),e.education&&(this.$v.form.$model.education=e.education))}},validations:{form:{native_language:{required:ce["required"]},citizenship:{required:ce["required"]},martial_status:{required:ce["required"]},organization:{required:ce["required"]},job_position:{required:ce["required"]},education:{required:ce["required"]},main_diploma_scan:{required:Object(ce["requiredIf"])((function(){return!this.user.mainDiplomaScan||this.uploadMainDiplomaScan}))},gesture_diploma_scan:{required:Object(ce["requiredIf"])((function(){return!this.user.gestureDiplomaScan||this.uploadGestureDiplomaScan}))}}},computed:{nativeLanguageErrors:function(){var e=[];return this.$v.form.native_language.$dirty?(!this.$v.form.native_language.required&&e.push("Поле 'Родной язык' обязательно!"),e):e},citizenshipErrors:function(){var e=[];return this.$v.form.citizenship.$dirty?(!this.$v.form.citizenship.required&&e.push("Поле 'Гражданство' обязательно!"),e):e},martialStatusErrors:function(){var e=[];return this.$v.form.martial_status.$dirty?(!this.$v.form.martial_status.required&&e.push("Поле 'Семейное положение' обязательно!"),e):e},organizationErrors:function(){var e=[];return this.$v.form.organization.$dirty?(!this.$v.form.organization.required&&e.push("Поле 'Организация' обязательно!"),e):e},jobPositionErrors:function(){var e=[];return this.$v.form.job_position.$dirty?(!this.$v.form.job_position.required&&e.push("Поле 'Занимаемая должность' обязательно!"),e):e},educationErrors:function(){var e=[];return this.$v.form.education.$dirty?(!this.$v.form.education.required&&e.push("Поле 'Образование' обязательно!"),e):e},mainDiplomaErrors:function(){var e=[];return this.$v.form.main_diploma_scan.$dirty?(!this.$v.form.main_diploma_scan.required&&(null==this.form.mainDiplomaScan||""==this.form.mainDiplomaScan||!this.uploadMainDiplomaScan)&&e.push("Поле 'Диплом об образовании' обязательно!"),e):e},gestureDiplomaErrors:function(){var e=[];return this.$v.form.gesture_diploma_scan.$dirty?(!this.$v.form.gesture_diploma_scan.required&&(null==this.form.gestureDiplomaScan||""==this.form.gestureDiplomaScan||!this.uploadGestureDiplomaScan)&&e.push("Поле 'Диплом об подготовке' обязательно!"),e):e}},methods:{sendCurrentStep:function(e){var t=this;return new Promise((function(r,a){t.$apollo.mutate({mutation:wt,variables:{requestId:t.$route.params.id,statusNumber:e},update:function(e,r){var a=r.data.updateRequestStatus,o=e.readQuery({query:Nt,variables:{userId:t.$store.getters.user_id}}),s=o.userRequests.findIndex((function(e){e.id,a.request.id}));-1!=s&&(o.userRequests[s].status=a.request.status),e.writeQuery({query:Nt,variables:{userId:t.$store.getters.user_id},data:o})}}).then((function(){r()})).catch((function(){a()}))}))},goToNextStep:function(){var e=this;this.$v.form.$touch(),this.$v.form.$anyError||(this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(3).finally((function(){e.$emit("goToNextStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1})))},goToPrevStep:function(){var e=this;this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(1).finally((function(){e.$emit("goToPrevStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1}))},sendForm:function(){var e=this;return this.$v.form.$model.main_diploma_scan&&(this.uploadMainDiplomaScan=!1),this.$v.form.$model.gesture_diploma_scan&&(this.uploadGestureDiplomaScan=!1),new Promise((function(t,r){e.$apollo.mutate({mutation:yt,variables:{userId:e.$store.getters.decoded.user_id,nativeLanguage:e.$v.form.$model.native_language,citizenship:e.$v.form.$model.citizenship,martialStatus:e.$v.form.$model.martial_status,organization:e.$v.form.$model.organization,jobPosition:e.$v.form.$model.job_position,education:e.$v.form.$model.education,mainDiplomaScan:e.$v.form.$model.main_diploma_scan,gestureDiplomaScan:e.$v.form.$model.gesture_diploma_scan},update:function(t,r){var a=r.data.setSecondProfilePart,o=t.readQuery({query:Dt,variables:{userId:e.$store.getters.user_id}});o.user.nativeLanguage=a.user.nativeLanguage,o.user.citizenship=a.user.citizenship,o.user.martialStatus=a.user.martialStatus,o.user.organization=a.user.organization,o.user.jobPosition=a.user.jobPosition,o.user.education=a.user.education,o.user.mainDiplomaScan=a.user.mainDiplomaScan,o.user.gestureDiplomaScan=a.user.gestureDiplomaScan,t.writeQuery({query:Dt,variables:{userId:e.$store.getters.user_id},data:o})}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))}}},Wt=Kt,Xt=Object(c["a"])(Wt,Yt,Jt,!1,null,"443b72f0",null),Zt=Xt.exports;E()(Xt,{VBtn:C["a"],VFileInput:Ut["a"],VForm:qe["a"],VImg:Gt["a"],VProgressCircular:W["a"],VRow:Ht["a"],VTextField:xe["a"]});var er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.$apollo.queries.user.loading||e.circleLoading1||e.circleLoading2?r("div",[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{label:"Данные паспорта",autocomplete:"passport","error-messages":e.passportErrors,required:""},on:{input:function(t){e.$v.form.passport.$touch(),e.sendForm()},blur:function(t){e.$v.form.passport.$touch(),e.sendForm()}},model:{value:e.$v.form.passport.$model,callback:function(t){e.$set(e.$v.form.passport,"$model",t)},expression:"$v.form.passport.$model"}}),e.user.passportPart1Scan&&!e.uploadPassportPart1Scan?r("div",{staticClass:"mb-4"},[r("small",[e._v("Скан паспорта - страницы 2-3 (разворот с фотографией)")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadPassportPart1Scan=!0,e.user.passportPart1Scan=null,e.$v.form.passport_part1_scan.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.user.passportPart1Scan,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{staticClass:"mb-2",attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Прикрепите скан",messages:["Загрузите в формате png, jpeg, jpg, pjp, pjpeg, jfif, bmp"],label:"Скан паспорта - страницы 2-3 (разворот с фотографией)","prepend-icon":"mdi-camera","error-messages":e.passportPart1ScanErrors},on:{input:function(t){return e.sendForm()},blur:function(t){return e.sendForm()}},model:{value:e.$v.form.passport_part1_scan.$model,callback:function(t){e.$set(e.$v.form.passport_part1_scan,"$model",t)},expression:"$v.form.passport_part1_scan.$model"}}),e.user.passportPart2Scan&&!e.uploadPassportPart2Scan?r("div",{staticClass:"mb-4"},[r("small",[e._v("Скан паспорта - страницы 4-5 (разворот с фотографией)")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadPassportPart2Scan=!0,e.user.passportPart2Scan=null,e.$v.form.passport_part2_scan.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.user.passportPart2Scan,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Прикрепите скан",label:"Скан паспорта - страницы 4-5 (разворот с фотографией)","prepend-icon":"mdi-camera",messages:["Загрузите в формате png, jpeg, jpg, pjp, pjpeg, jfif, bmp"],"error-messages":e.passportPart2ScanErrors},on:{input:function(t){return e.sendForm()},blur:function(t){return e.sendForm()}},model:{value:e.$v.form.passport_part2_scan.$model,callback:function(t){e.$set(e.$v.form.passport_part2_scan,"$model",t)},expression:"$v.form.passport_part2_scan.$model"}})],1),this.$apollo.queries.user.loading||e.circleLoading1||e.circleLoading2?e._e():r("v-btn",{staticClass:"mt-2",attrs:{color:"primary",disabled:e.$v.form.$anyError},on:{click:e.goToNextStep}},[e._v(" Далее ")]),this.$apollo.queries.user.loading||e.circleLoading1||e.circleLoading2?e._e():r("v-btn",{staticClass:"mt-2",attrs:{text:"",disabled:e.$v.form.$anyError},on:{click:e.goToPrevStep}},[e._v(" Назад ")])],1)},tr=[],rr={name:"ProfileStep3",data:function(){return{formLoading:!1,circleLoading1:!1,circleLoading2:!1,uploadPassportPart1Scan:!1,uploadPassportPart2Scan:!1,form:{passport:null,passport_part1_scan:null,passport_part2_scan:null}}},apollo:{user:{query:Ot,variables:function(){return{userId:this.$store.getters.user_id}}}},watch:{user:function(e){e&&e.passport&&(this.$v.form.$model.passport=e.passport)}},validations:{form:{passport:{required:ce["required"]},passport_part1_scan:{required:Object(ce["requiredIf"])((function(){return!this.user.passportPart1Scan||this.uploadPassportPart1Scan}))},passport_part2_scan:{required:Object(ce["requiredIf"])((function(){return!this.user.passportPart2Scan||this.uploadPassportPart2Scan}))}}},computed:{passportErrors:function(){var e=[];return this.$v.form.passport.$dirty?(!this.$v.form.passport.required&&e.push("Поле 'Данные паспорта' обязательно!"),e):e},passportPart1ScanErrors:function(){var e=[];return this.$v.form.passport_part1_scan.$dirty?(!this.$v.form.passport_part1_scan.required&&(null==this.form.passportPart1Scan||""==this.form.passportPart1Scan||!this.uploadPassportPart1Scan)&&e.push("Поле 'Скан паспорта (часть 1)' обязательно!"),e):e},passportPart2ScanErrors:function(){var e=[];return this.$v.form.passport_part2_scan.$dirty?(!this.$v.form.passport_part2_scan.required&&(null==this.form.passportPart2Scan||""==this.form.passportPart2Scan||!this.uploadPassportPart2Scan)&&e.push("Поле 'Скан паспорта (часть 2)' обязательно!"),e):e}},methods:{sendCurrentStep:function(e){var t=this;return new Promise((function(r,a){t.$apollo.mutate({mutation:wt,variables:{requestId:t.$route.params.id,statusNumber:e},update:function(e,r){var a=r.data.updateRequestStatus,o=e.readQuery({query:Nt,variables:{userId:t.$store.getters.user_id}}),s=o.userRequests.findIndex((function(e){e.id,a.request.id}));-1!=s&&(o.userRequests[s].status=a.request.status),e.writeQuery({query:Nt,variables:{userId:t.$store.getters.user_id},data:o})}}).then((function(){r()})).catch((function(){a()}))}))},goToNextStep:function(){var e=this;this.$v.form.$touch(),this.$v.form.$anyError||(this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(4).finally((function(){e.$emit("goToNextStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1})))},goToPrevStep:function(){var e=this;this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(2).finally((function(){e.$emit("goToPrevStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1}))},sendForm:function(){var e=this;return this.$v.form.$model.passport_part1_scan&&(this.uploadPassportPart1Scan=!1),this.$v.form.$model.passport_part2_scan&&(this.uploadPassportPart2Scan=!1),new Promise((function(t,r){e.$apollo.mutate({mutation:qt,variables:{userId:e.$store.getters.decoded.user_id,passport:e.$v.form.$model.passport,passportPart1Scan:e.$v.form.$model.passport_part1_scan,passportPart2Scan:e.$v.form.$model.passport_part2_scan},update:function(t,r){var a=r.data.setThirdProfilePart,o=t.readQuery({query:Ot,variables:{userId:e.$store.getters.user_id}});o.user.passport=a.user.passport,o.user.passportPart1Scan=a.user.passportPart1Scan,o.user.passportPart2Scan=a.user.passportPart2Scan,t.writeQuery({query:Ot,variables:{userId:e.$store.getters.user_id},data:o})}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))}}},ar=rr,or=Object(c["a"])(ar,er,tr,!1,null,"4569b1c4",null),sr=or.exports;E()(or,{VBtn:C["a"],VFileInput:Ut["a"],VForm:qe["a"],VImg:Gt["a"],VProgressCircular:W["a"],VRow:Ht["a"],VTextField:xe["a"]});var nr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.$apollo.queries.user.loading?r("div",[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{label:"Домашний адрес",autocomplete:"address","error-messages":e.homeAddressErrors,required:""},on:{input:function(t){e.$v.form.home_address.$touch(),e.sendForm()},blur:function(t){e.$v.form.home_address.$touch(),e.sendForm()}},model:{value:e.$v.form.home_address.$model,callback:function(t){e.$set(e.$v.form.home_address,"$model",t)},expression:"$v.form.home_address.$model"}}),r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{label:"Мобильный телефон",autocomplete:"phone",placeholder:"+7 (###) ###-##-##","error-messages":e.personalPhoneErrors,required:""},on:{input:function(t){e.$v.form.personal_phone.$touch(),e.sendForm()},blur:function(t){e.$v.form.personal_phone.$touch(),e.sendForm()}},model:{value:e.$v.form.personal_phone.$model,callback:function(t){e.$set(e.$v.form.personal_phone,"$model",t)},expression:"$v.form.personal_phone.$model"}}),r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{label:"Домашний телефон",autocomplete:"home_phone",placeholder:"+7 (###) ###-##-##","error-messages":e.homePhoneErrors},on:{input:function(t){e.$v.form.home_phone.$touch(),e.sendForm()},blur:function(t){e.$v.form.home_phone.$touch(),e.sendForm()}},model:{value:e.$v.form.home_phone.$model,callback:function(t){e.$set(e.$v.form.home_phone,"$model",t)},expression:"$v.form.home_phone.$model"}}),r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{label:"Рабочий телефон",autocomplete:"work_phone",placeholder:"+7 (###) ###-##-##","error-messages":e.workPhoneErrors},on:{input:function(t){e.$v.form.work_phone.$touch(),e.sendForm()},blur:function(t){e.$v.form.work_phone.$touch(),e.sendForm()}},model:{value:e.$v.form.work_phone.$model,callback:function(t){e.$set(e.$v.form.work_phone,"$model",t)},expression:"$v.form.work_phone.$model"}})],1),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{color:"primary",disabled:e.$v.form.$anyError},on:{click:e.goToNextStep}},[e._v(" Далее ")]),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{text:"",disabled:e.$v.form.$anyError},on:{click:e.goToPrevStep}},[e._v(" Назад ")])],1)},ir=[],ur={name:"ProfileStep4",data:function(){return{formLoading:!1,form:{home_address:null,personal_phone:null,home_phone:null,work_phone:null}}},apollo:{user:{query:Ft,variables:function(){return{userId:this.$store.getters.user_id}}}},watch:{user:function(e){e&&(e.homeAddress&&(this.$v.form.$model.home_address=e.homeAddress),e.personalPhone&&(this.$v.form.$model.personal_phone=e.personalPhone),e.homePhone&&(this.$v.form.$model.home_phone=e.homePhone),e.workPhone&&(this.$v.form.$model.work_phone=e.workPhone))}},validations:{form:{home_address:{required:ce["required"]},personal_phone:{required:ce["required"]},home_phone:{},work_phone:{}}},computed:{homeAddressErrors:function(){var e=[];return this.$v.form.home_address.$dirty?(!this.$v.form.home_address.required&&e.push("Поле 'Домашний адрес' обязательно!"),e):e},personalPhoneErrors:function(){var e=[];return this.$v.form.personal_phone.$dirty?(!this.$v.form.personal_phone.required&&e.push("Поле 'Мобильный телефон' обязательно!"),e):e},homePhoneErrors:function(){var e=[];return this.$v.form.home_phone.$dirty,e},workPhoneErrors:function(){var e=[];return this.$v.form.work_phone.$dirty,e}},methods:{sendCurrentStep:function(e){var t=this;return new Promise((function(r,a){t.$apollo.mutate({mutation:wt,variables:{requestId:t.$route.params.id,statusNumber:e},update:function(e,r){var a=r.data.updateRequestStatus,o=e.readQuery({query:Nt,variables:{userId:t.$store.getters.user_id}}),s=o.userRequests.findIndex((function(e){e.id,a.request.id}));-1!=s&&(o.userRequests[s].status=a.request.status),e.writeQuery({query:Nt,variables:{userId:t.$store.getters.user_id},data:o})}}).then((function(){r()})).catch((function(){a()}))}))},goToNextStep:function(){var e=this;this.$v.form.$touch(),this.$v.form.$anyError||(this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(5).finally((function(){e.$emit("goToNextStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1})))},goToPrevStep:function(){var e=this;this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(3).finally((function(){e.$emit("goToPrevStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1}))},sendForm:function(){var e=this;return new Promise((function(t,r){e.$apollo.mutate({mutation:xt,variables:{userId:e.$store.getters.decoded.user_id,homeAddress:e.$v.form.$model.home_address,personalPhone:e.$v.form.$model.personal_phone,homePhone:e.$v.form.$model.home_phone,workPhone:e.$v.form.$model.work_phone},update:function(t,r){var a=r.data.setFourthProfilePart,o=t.readQuery({query:Ft,variables:{userId:e.$store.getters.user_id}});o.user.homeAddress=a.user.homeAddress,o.user.personalPhone=a.user.personalPhone,o.user.homePhone=a.user.homePhone,o.user.workPhone=a.user.workPhone,t.writeQuery({query:Ft,variables:{userId:e.$store.getters.user_id},data:o})}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))}}},cr=ur,lr=Object(c["a"])(cr,nr,ir,!1,null,"6601ab5d",null),mr=lr.exports;E()(lr,{VBtn:C["a"],VForm:qe["a"],VProgressCircular:W["a"],VTextField:xe["a"]});var dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.$apollo.queries.user.loading||e.circleLoading||e.circleLoading2?r("div",[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-select",{attrs:{items:e.selectYears(),"item-text":"text","item-value":"value",label:"Год начала трудовой деятельности","error-messages":e.fullWorkExperienceStartYearErrors},on:{input:function(t){e.$v.form.full_work_experience_start_year.$touch(),e.sendForm()},blur:function(t){e.$v.form.full_work_experience_start_year.$touch(),e.sendForm()}},model:{value:e.$v.form.full_work_experience_start_year.$model,callback:function(t){e.$set(e.$v.form.full_work_experience_start_year,"$model",t)},expression:"$v.form.full_work_experience_start_year.$model"}}),r("v-select",{attrs:{items:e.selectYears(),"item-text":"text","item-value":"value",label:"Год начала работы по настоящей должности","error-messages":e.currentJobExperienceStartYearErrors},on:{input:function(t){e.$v.form.current_job_experience_start_year.$touch(),e.sendForm()},blur:function(t){e.$v.form.current_job_experience_start_year.$touch(),e.sendForm()}},model:{value:e.$v.form.current_job_experience_start_year.$model,callback:function(t){e.$set(e.$v.form.current_job_experience_start_year,"$model",t)},expression:"$v.form.current_job_experience_start_year.$model"}}),r("v-textarea",{staticClass:"mb-2",attrs:{label:"Наличие наград","error-messages":e.awardsErrors,hint:"Опишите ваш список наград","auto-grow":"",rows:"2",required:""},on:{input:function(t){e.$v.form.awards.$touch(),e.sendForm()},blur:function(t){e.$v.form.awards.$touch(),e.sendForm()}},model:{value:e.$v.form.awards.$model,callback:function(t){e.$set(e.$v.form.awards,"$model",t)},expression:"$v.form.awards.$model"}}),r("v-textarea",{staticClass:"mb-2",attrs:{label:"Повышение квалификации","error-messages":e.trainingErrors,hint:"Опишите ваше повышение квалификации","auto-grow":"",rows:"2",required:""},on:{input:function(t){e.$v.form.training.$touch(),e.sendForm()},blur:function(t){e.$v.form.training.$touch(),e.sendForm()}},model:{value:e.$v.form.training.$model,callback:function(t){e.$set(e.$v.form.training,"$model",t)},expression:"$v.form.training.$model"}}),r("v-textarea",{staticClass:"mb-2",attrs:{label:"Членство в организациях","error-messages":e.organizationMembershipErrors,hint:"Опишите ваше членство в организациях","auto-grow":"",rows:"2",required:""},on:{input:function(t){e.$v.form.organization_membership.$touch(),e.sendForm()},blur:function(t){e.$v.form.organization_membership.$touch(),e.sendForm()}},model:{value:e.$v.form.organization_membership.$model,callback:function(t){e.$set(e.$v.form.organization_membership,"$model",t)},expression:"$v.form.organization_membership.$model"}}),e.user.characteristic&&!e.uploadCharacteristic?r("div",{staticClass:"mb-4"},[r("small",[e._v("Характеристика")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadCharacteristic=!0,e.user.characteristic=null,e.$v.form.characteristic.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.user.characteristic,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{staticClass:"mb-2",attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",messages:["Загрузите в формате png, jpeg, jpg, pjp, pjpeg, jfif, bmp"],placeholder:"Прикрепите скан",label:"Характеристика","prepend-icon":"mdi-camera","error-messages":e.characteristicErrors},on:{input:function(t){return e.sendForm()},blur:function(t){return e.sendForm()}},model:{value:e.$v.form.characteristic.$model,callback:function(t){e.$set(e.$v.form.characteristic,"$model",t)},expression:"$v.form.characteristic.$model"}}),e.user.employmentHistory&&!e.uploadEmploymentHistory?r("div",{staticClass:"mb-4"},[r("small",[e._v("Заверенная копия трудовой книжки (все страницы)")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadEmploymentHistory=!0,e.user.employmentHistory=null,e.$v.form.employment_history.$model=null}}},[e._v(" Выбрать другой файл ")]),r("embed",{attrs:{src:"/media/"+e.user.employmentHistory,"aspect-ratio":"1",height:"200px",width:"100%"}})],1):r("v-file-input",{attrs:{chips:"",accept:"application/pdf",placeholder:"Прикрепите скан",label:"Заверенная копия трудовой книжки (все страницы)","prepend-icon":"mdi-file-document-outline","error-messages":e.employmentHistoryErrors,messages:["Загрузите в формате pdf"]},on:{input:function(t){return e.sendForm()},blur:function(t){return e.sendForm()}},model:{value:e.$v.form.employment_history.$model,callback:function(t){e.$set(e.$v.form.employment_history,"$model",t)},expression:"$v.form.employment_history.$model"}})],1),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{color:"primary",disabled:e.$v.form.$anyError},on:{click:e.goToNextStep}},[e._v(" Далее ")]),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{text:"",disabled:e.$v.form.$anyError},on:{click:e.goToPrevStep}},[e._v(" Назад ")])],1)},pr=[],fr={name:"ProfileStep5",data:function(){return{formLoading:!1,circleLoading:!1,circleLoading2:!1,uploadCharacteristic:!1,uploadEmploymentHistory:!1,form:{full_work_experience_start_year:null,current_job_experience_start_year:null,awards:null,training:null,organization_membership:null,characteristic:null,employment_history:null}}},apollo:{user:{query:Lt,variables:function(){return{userId:this.$store.getters.user_id}}}},watch:{user:function(e){e&&(e.fullWorkExperienceStartYear&&(this.$v.form.$model.full_work_experience_start_year=e.fullWorkExperienceStartYear.split("A_")[1]),e.currentJobExperienceStartYear&&(this.$v.form.$model.current_job_experience_start_year=e.currentJobExperienceStartYear.split("A_")[1]),e.awards&&(this.$v.form.$model.awards=e.awards),e.training&&(this.$v.form.$model.training=e.training),e.organizationMembership&&(this.$v.form.$model.organization_membership=e.organizationMembership))}},validations:{form:{full_work_experience_start_year:{required:ce["required"]},current_job_experience_start_year:{required:ce["required"]},awards:{},training:{},organization_membership:{},characteristic:{required:Object(ce["requiredIf"])((function(){return!this.user.characteristic||this.uploadCharacteristic}))},employment_history:{required:Object(ce["requiredIf"])((function(){return!this.user.employmentHistory||this.uploadEmploymentHistory}))}}},computed:{fullWorkExperienceStartYearErrors:function(){var e=[];return this.$v.form.full_work_experience_start_year.$dirty?(!this.$v.form.full_work_experience_start_year.required&&e.push("Поле 'Год начада трудовой деятельности' обязательно!"),e):e},currentJobExperienceStartYearErrors:function(){var e=[];return this.$v.form.current_job_experience_start_year.$dirty?(!this.$v.form.current_job_experience_start_year.required&&e.push("Поле 'Стаж настоящей должности' обязательно!"),e):e},awardsErrors:function(){var e=[];return this.$v.form.awards.$dirty,e},trainingErrors:function(){var e=[];return this.$v.form.training.$dirty,e},organizationMembershipErrors:function(){var e=[];return this.$v.form.organization_membership.$dirty,e},characteristicErrors:function(){var e=[];return this.$v.form.characteristic.$dirty?(!this.$v.form.characteristic.required&&(null==this.form.characteristic||""==this.form.characteristic||!this.uploadCharacteristic)&&e.push("Поле 'Характеристика' обязательно!"),e):e},employmentHistoryErrors:function(){var e=[];return this.$v.form.employment_history.$dirty?(!this.$v.form.employment_history.required&&(null==this.form.employmentHistory||""==this.form.employmentHistory||!this.uploadEmploymentHistory)&&e.push("Поле 'Копия трудовой книжки' обязательно!"),e):e}},methods:{sendCurrentStep:function(e){var t=this;return new Promise((function(r,a){t.$apollo.mutate({mutation:wt,variables:{requestId:t.$route.params.id,statusNumber:e},update:function(e,r){var a=r.data.updateRequestStatus,o=e.readQuery({query:Nt,variables:{userId:t.$store.getters.user_id}}),s=o.userRequests.findIndex((function(e){e.id,a.request.id}));-1!=s&&(o.userRequests[s].status=a.request.status),e.writeQuery({query:Nt,variables:{userId:t.$store.getters.user_id},data:o})}}).then((function(){r()})).catch((function(){a()}))}))},goToNextStep:function(){var e=this;this.$v.form.$touch(),this.$v.form.$anyError||(this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(6).finally((function(){e.$emit("goToNextStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1})))},goToPrevStep:function(){var e=this;this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(4).finally((function(){e.$emit("goToPrevStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1}))},sendForm:function(){var e=this;return this.$v.form.$model.characteristic&&(this.uploadCharacteristic=!1),this.$v.form.$model.employment_history&&(this.uploadEmploymentHistory=!1),new Promise((function(t,r){e.$apollo.mutate({mutation:Et,variables:{userId:e.$store.getters.decoded.user_id,fullWorkExperienceStartYear:e.$v.form.$model.full_work_experience_start_year,currentJobExperienceStartYear:e.$v.form.$model.current_job_experience_start_year,awards:e.$v.form.$model.awards,training:e.$v.form.$model.training,organizationMembership:e.$v.form.$model.organization_membership,characteristic:e.$v.form.$model.characteristic,employmentHistory:e.$v.form.$model.employment_history},update:function(t,r){var a=r.data.setFifthProfilePart,o=t.readQuery({query:Lt,variables:{userId:e.$store.getters.user_id}});o.user.fullWorkExperienceStartYear=a.user.fullWorkExperienceStartYear,o.user.currentJobExperienceStartYear=a.user.currentJobExperienceStartYear,o.user.awards=a.user.awards,o.user.training=a.user.training,o.user.organizationMembership=a.user.organizationMembership,o.user.characteristic=a.user.characteristic,o.user.employmentHistory=a.user.employmentHistory,t.writeQuery({query:Lt,variables:{userId:e.$store.getters.user_id},data:o})}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},selectYears:function(){for(var e=[],t=(new Date).getFullYear();t>=1950;t--)e.push({text:""+t,value:""+t});return e}}},hr=fr,vr=r("a844"),$r=Object(c["a"])(hr,dr,pr,!1,null,"632e4f6a",null),gr=$r.exports;E()($r,{VBtn:C["a"],VFileInput:Ut["a"],VForm:qe["a"],VImg:Gt["a"],VProgressCircular:W["a"],VRow:Ht["a"],VSelect:Mt["a"],VTextarea:vr["a"]});var _r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.$apollo.queries.user.loading||e.circleLoading1||e.circleLoading2?r("div",[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{label:"Номер сертификата аттестации","error-messages":e.attestationCertificateNumberErrors,disabled:e.formLoading,required:""},on:{input:function(t){e.$v.form.attestation_certificate_number.$touch(),e.sendForm()},blur:function(t){e.$v.form.attestation_certificate_number.$touch(),e.sendForm()}},model:{value:e.$v.form.attestation_certificate_number.$model,callback:function(t){e.$set(e.$v.form.attestation_certificate_number,"$model",t)},expression:"$v.form.attestation_certificate_number.$model"}}),r("DatePicker",{attrs:{label:"Дата выдачи сертификата аттестации",disabled:e.formLoading,errors:e.attestationСertificateDateErrors,max:(new Date).toISOString().slice(0,10),predefined:e.predefinedAttestationСertificateDate},on:{update:function(t){e.$v.form.attestation_certificate_date.$model=t,e.sendForm()}}}),e.user.attestationCertificateScan&&!e.uploadAttestationCertificateScan?r("div",{staticClass:"mb-4"},[r("small",[e._v("Скан сертификата аттестации")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadAttestationCertificateScan=!0,e.user.attestationCertificateScan=null,e.$v.form.attestation_certificate_scan.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.user.attestationCertificateScan,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Прикрепите скан",label:"Скан сертификата аттестации","prepend-icon":"mdi-camera","error-messages":e.attestationСertificateScanErrors},on:{input:function(t){return e.sendForm()},blur:function(t){return e.sendForm()}},model:{value:e.$v.form.attestation_certificate_scan.$model,callback:function(t){e.$set(e.$v.form.attestation_certificate_scan,"$model",t)},expression:"$v.form.attestation_certificate_scan.$model"}}),void 0!=e.request&&e.request.cheque&&!e.uploadCheque?r("div",{staticClass:"mb-4"},[r("small",[e._v("Чек об оплате организационного взноса")]),r("br"),r("v-btn",{attrs:{color:"success",text:"",block:"",small:""},on:{click:function(t){e.uploadCheque=!0,e.request.cheque=null,e.$v.form.cheque.$model=null}}},[e._v(" Выбрать другой файл ")]),r("v-img",{staticClass:"grey lighten-2",attrs:{src:"/media/"+e.request.cheque,"aspect-ratio":"1","max-height":"200",contain:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)})],1):r("v-file-input",{attrs:{chips:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Прикрепите скан",label:"Чек об оплате орг. взноса","prepend-icon":"mdi-camera","error-messages":e.chequeErrors},on:{input:function(t){return e.sendForm()},blur:function(t){return e.sendForm()}},model:{value:e.$v.form.cheque.$model,callback:function(t){e.$set(e.$v.form.cheque,"$model",t)},expression:"$v.form.cheque.$model"}})],1),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{color:"primary",disabled:e.$v.form.$anyError},on:{click:e.goToNextStep}},[e._v(" Отправить ")]),this.$apollo.queries.user.loading?e._e():r("v-btn",{staticClass:"mt-2",attrs:{text:"",disabled:e.$v.form.$anyError},on:{click:e.goToPrevStep}},[e._v(" Назад ")])],1)},br=[],Sr={name:"ProfileStep6",components:{DatePicker:Ze},data:function(){return{formLoading:!1,circleLoading1:!1,circleLoading2:!1,uploadAttestationCertificateScan:!1,uploadCheque:!1,form:{attestation_certificate_number:null,attestation_certificate_date:null,attestation_certificate_scan:null,cheque:null}}},apollo:{user:{query:Tt,variables:function(){return{userId:this.$store.getters.user_id,requestId:this.$route.params.id}}},request:{query:Vt,variables:function(){return{requestId:this.$route.params.id}}}},watch:{user:function(e){e.attestationCertificateNumber&&(this.$v.form.$model.attestation_certificate_number=e.attestationCertificateNumber),e.attestationCertificateDate&&(this.$v.form.$model.attestation_certificate_date=e.attestationCertificateDate)}},validations:{form:{attestation_certificate_number:{required:ce["required"]},attestation_certificate_date:{required:ce["required"]},attestation_certificate_scan:{required:Object(ce["requiredIf"])((function(){return!this.user.attestationCertificateScan||this.uploadAttestationCertificateScan}))},cheque:{required:Object(ce["requiredIf"])((function(){return!this.request.cheque||this.uploadCheque}))}}},computed:{attestationCertificateNumberErrors:function(){var e=[];return this.$v.form.attestation_certificate_number.$dirty?(!this.$v.form.attestation_certificate_number.required&&e.push("Поле 'Номер сертификата аттестации' обязательно!"),e):e},"attestationСertificateDateErrors":function(){var e=[];return this.$v.form.attestation_certificate_date.$dirty?(!this.$v.form.attestation_certificate_date.required&&e.push("Поле 'Дата выдачи сертификата аттестации' обязательно!"),e):e},"attestationСertificateScanErrors":function(){var e=[];return this.$v.form.attestation_certificate_scan.$dirty?(!this.$v.form.attestation_certificate_scan.required&&(null==this.form.attestationCertificateScan||""==this.form.attestationCertificateScan||!this.uploadAttestationCertificateScan)&&e.push("Поле 'Скан сертификата аттестации' обязательно!"),e):e},chequeErrors:function(){var e=[];return this.$v.form.cheque.$dirty?(!this.$v.form.cheque.required&&(null==this.form.cheque||""==this.form.cheque||!this.uploadCheque)&&e.push("Поле 'Чек об оплате орг. взноса' обязательно!"),e):e},"predefinedAttestationСertificateDate":function(){return this.user&&this.user.attestationCertificateDate?this.user.attestationCertificateDate:null}},methods:{sendCurrentStep:function(e){var t=this;return new Promise((function(r,a){t.$apollo.mutate({mutation:wt,variables:{requestId:t.$route.params.id,statusNumber:e},update:function(e,r){var a=r.data.updateRequestStatus,o=e.readQuery({query:Nt,variables:{userId:t.$store.getters.user_id}}),s=o.userRequests.findIndex((function(e){e.id,a.request.id}));-1!=s&&(o.userRequests[s].status=a.request.status),e.writeQuery({query:Nt,variables:{userId:t.$store.getters.user_id},data:o})}}).then((function(){r()})).catch((function(){a()}))}))},goToNextStep:function(){var e=this;this.$v.form.$touch(),this.$v.form.$anyError||(this.formLoading=!0,this.sendForm().then((function(){e.$emit("goToNextStep"),e.formLoading=!1})).catch((function(){e.formLoading=!1})))},goToPrevStep:function(){var e=this;this.formLoading=!0,this.sendForm().then((function(){e.sendCurrentStep(5).finally((function(){e.$emit("goToPrevStep"),e.formLoading=!1}))})).catch((function(){e.formLoading=!1}))},sendForm:function(){var e=this;return this.$v.form.$model.attestation_certificate_scan&&(this.uploadAttestationCertificateScan=!1),this.$v.form.$model.cheque&&(this.uploadCheque=!1),new Promise((function(t,r){e.$apollo.mutate({mutation:Pt,variables:{userId:e.$store.getters.decoded.user_id,requestId:e.$route.params.id,attestationCertificateNumber:e.$v.form.$model.attestation_certificate_number,attestationCertificateDate:e.$v.form.$model.attestation_certificate_date,attestationCertificateScan:e.$v.form.$model.attestation_certificate_scan,cheque:e.$v.form.$model.cheque},update:function(t,r){var a=r.data.setSixthProfilePart,o=t.readQuery({query:Tt,variables:{userId:e.$store.getters.user_id,requestId:e.$route.params.id}});o.user.attestationCertificateNumber=a.user.attestationCertificateNumber,o.user.attestationCertificateDate=a.user.attestationCertificateDate,o.user.attestationCertificateScan=a.user.attestationCertificateScan,o.request.cheque=a.request.cheque,t.writeQuery({query:Tt,variables:{userId:e.$store.getters.user_id,requestId:e.$route.params.id},data:o})}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))}}},yr=Sr,qr=Object(c["a"])(yr,_r,br,!1,null,"f627b4c0",null),xr=qr.exports;E()(qr,{VBtn:C["a"],VFileInput:Ut["a"],VForm:qe["a"],VImg:Gt["a"],VProgressCircular:W["a"],VRow:Ht["a"],VTextField:xe["a"]});var Er={name:"AttestableView",components:{ProfileStep1:Bt,ProfileStep2:Zt,ProfileStep3:sr,ProfileStep4:mr,ProfileStep5:gr,ProfileStep6:xr},data:function(){return{stepperStatus:1,stepperLoading:!1}},apollo:{request:{query:At,variables:function(){return{requestId:this.$route.params.id}}}},watch:{request:function(e){if(e.status)switch(e.status.toUpperCase()){case"STEP_1":this.stepperStatus=1;break;case"STEP_2":this.stepperStatus=2;break;case"STEP_3":this.stepperStatus=3;break;case"STEP_4":this.stepperStatus=4;break;case"STEP_5":this.stepperStatus=5;break;case"STEP_6":this.stepperStatus=6;break;default:break}}},methods:{finishEditing:function(){var e=this;this.stepperLoading=!0,this.$apollo.mutate({mutation:kt,variables:{requestId:this.$route.params.id},update:function(t,r){var a=r.data.finishRequest,o=t.readQuery({query:Nt,variables:{userId:e.$store.getters.user_id}}),s=o.userRequests.findIndex((function(e){return+e.id==+a.request.id}));-1!=s&&(o.userRequests[s].status=a.request.status,o.userRequests[s].requestNumber=a.register.requestNumber),t.writeQuery({query:Nt,variables:{userId:e.$store.getters.user_id},data:o})}}).then((function(){e.$store.commit("OPEN_SUCCESS_DIALOG"),e.$router.push("/")})).catch((function(){e.$store.commit("OPEN_ERROR_DIALOG")})).finally((function(){e.stepperLoading=!1}))}}},Pr=Er,wr=r("7e85"),kr=r("e516"),Cr=r("56a4"),Ir=Object(c["a"])(Pr,Ve,Re,!1,null,"49d71c45",null),jr=Ir.exports;E()(Ir,{VLayout:Y["a"],VProgressCircular:W["a"],VStepper:wr["a"],VStepperContent:kr["a"],VStepperStep:Cr["a"]});var Dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("SendingConfirmationDialog",{on:{close:function(t){return e.$store.commit("CLOSE_SUCCESS_DIALOG")}}}),r("h1",[e._v("Ваши заявки")]),r("v-btn",{staticClass:"mt-2 mb-2",attrs:{color:"primary",block:"",outlined:""},on:{click:e.startNewRequest}},[e._v(" Подать новую заявку ")]),r("v-data-table",{attrs:{headers:e.headers,items:e.items,"no-data-text":"Заявки отсутствуют"},scopedSlots:e._u([{key:"item",fn:function(t){return[r("tr",[r("td",[r("b",[e._v(e._s(t.item.requestNumber))])]),r("td",[e._v(e._s(t.item.status))]),t.item.comment?r("td",{staticStyle:{"max-width":"200px","word-wrap":"break-word"}},[e._v(" "+e._s(t.item.comment)+" ")]):r("td",[e._v("-")]),r("td",[e.canBeEdited(t.item.id)?r("div",{staticClass:"d-flex justify-end"},[r("v-btn",{staticClass:"mx-2",attrs:{dark:"",color:"primary",to:"/request/"+t.item.id}},[e._v(" Редактировать "),r("v-icon",{attrs:{dark:""}},[e._v("mdi-arrow-right")])],1),r("v-btn",{style:{visibility:"-"!=t.item.requestNumber?"hidden":"visible"},attrs:{disabled:"-"!=t.item.requestNumber,icon:"",tile:"",depressed:""},on:{click:function(r){return e.deleteRequest(t.item.id)}}},[r("v-icon",{attrs:{dark:""}},[e._v(" mdi-delete ")])],1)],1):r("div",{staticClass:"d-flex justify-end"},[e._v("-")])])])]}}])})],1)},Or=[],Fr=(r("d81d"),r("a434"),r("7db0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500"},model:{value:e.innerDialog,callback:function(t){e.innerDialog=t},expression:"innerDialog"}},[r("v-card",[r("v-card-text",{staticClass:"pt-4"},[r("div",{staticClass:"text-center pb-2"},[r("v-icon",{attrs:{"x-large":"",color:"success"}},[e._v(" mdi-check-circle-outline ")])],1),r("div",{staticClass:"text-center mt-2"},[r("h2",[e._v("Вы успешно отправили заявку!")])])]),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Закрыть ")])],1)],1)],1)],1)}),Lr=[],Tr={name:"SendingConfirmationDialog",data:function(){return{innerDialog:this.$store.state.successRequestDialog}},watch:{"$store.state.successRequestDialog":function(){this.innerDialog=this.$store.state.successRequestDialog}}},Nr=Tr,Ar=Object(c["a"])(Nr,Fr,Lr,!1,null,"1bece41e",null),Vr=Ar.exports;E()(Ar,{VBtn:C["a"],VCard:fe["a"],VCardActions:he["a"],VCardText:he["b"],VDialog:ve["a"],VDivider:V["a"],VIcon:$e["a"],VSpacer:j["a"]});var Rr={name:"AttestableList",components:{SendingConfirmationDialog:Vr},data:function(){return{headers:[{text:"Номер заявки",value:"requestNumber"},{text:"Статус заявки",value:"status"},{text:"Комментарий",value:"comment",sortable:!1},{text:"Действия",value:"actions",sortable:!1,align:"right"}]}},apollo:{userRequests:{query:Nt,variables:function(){return{userId:this.$store.getters.user_id}}}},computed:{items:function(){if(void 0!==this.userRequests){var e=JSON.parse(JSON.stringify(this.userRequests));return Array.isArray(e)?e.map((function(e){switch(e.status.toUpperCase()){case"STEP_1":e.status="Шаг 1";break;case"STEP_2":e.status="Шаг 2";break;case"STEP_3":e.status="Шаг 3";break;case"STEP_4":e.status="Шаг 4";break;case"STEP_5":e.status="Шаг 5";break;case"STEP_6":e.status="Шаг 6";break;case"ON_CHECK":e.status="Отправлена на проверку";break;case"CANCELED":e.status="Отклонена";break;case"CONFIRMED":e.status="Успешно подтверждена";break;case"COMPLETED":e.status="Завершена работа";break;case"RETURNED":e.status="Возвращена на доработку";break;default:e.status="-";break}return e})):[]}return this.userRequests},showSuccessDialog:function(){return this.$store.state.successRequestDialog}},methods:{startNewRequest:function(){var e=this;this.$apollo.mutate({mutation:Ct,variables:{userId:this.$store.getters.user_id},update:function(t,r){var a=r.data.startNewRequest,o=t.readQuery({query:Nt,variables:{userId:e.$store.getters.user_id}});Array.isArray(o.userRequests)&&o.userRequests.push(a.request),t.writeQuery({query:Nt,variables:{userId:e.$store.getters.user_id},data:o})}}).then((function(t){null!=t.data.startNewRequest&&e.$router.push("/request/".concat(t.data.startNewRequest.request.id))}))},deleteRequest:function(e){var t=this;this.$apollo.mutate({mutation:It,variables:{requestId:e},update:function(r){var a=r.readQuery({query:Nt,variables:{userId:t.$store.getters.user_id}}),o=a.userRequests.findIndex((function(t){return t.id==e}));-1!=o&&a.userRequests.splice(o,1),r.writeQuery({query:Nt,variables:{userId:t.$store.getters.user_id},data:a})}})},canBeEdited:function(e){var t=this.userRequests.find((function(t){return t.id==e})),r="";null!=t&&(r=t.status);var a=!1;switch(r.toUpperCase()){case"STEP_1":case"STEP_2":case"STEP_3":case"STEP_4":case"STEP_5":case"STEP_6":case"RETURNED":a=!0;break;case"ON_CHECK":case"CANCELED":case"CONFIRMED":case"COMPLETED":default:break}return a}}},zr=Rr,Ur=r("8fea"),Gr=Object(c["a"])(zr,Dr,Or,!1,null,"da75ed2e",null),Hr=Gr.exports;E()(Gr,{VBtn:C["a"],VDataTable:Ur["a"],VIcon:$e["a"]}),a["a"].use(d["a"]);var Mr=function(e,t,r){null==$.state.firstPath&&$.commit("SET_FIRST_PATH",e.path),$.getters.isAuthenticated?r():r("/login")},Qr=function(e,t,r){$.getters.isAuthenticated?r("/"):r()},Br=[{path:"/",component:Z,children:[{path:"/login",component:se,beforeEnter:Qr,children:[{path:"/",name:"LogIn",component:Pe},{path:"/signup",name:"SignUp",component:De}]},{path:"/",beforeEnter:Mr,component:Ae,children:[{path:"/request/:id",component:jr,name:"AttestableView"},{path:"/",component:Hr,name:"AttestableList"}]}]},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],Yr=new d["a"]({mode:"history",base:"/",routes:Br}),Jr=Yr,Kr=r("f309"),Wr=r("e1bf");a["a"].use(Kr["a"]);var Xr=new Kr["a"]({theme:{themes:{light:{primary:"#CC122E",secondary:"#424242",accent:"#82B1FF",error:"#DA2036",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",white:"#FFFFFF",lightBlue:"#C8F5FA",pink:"#FF618C",green:"#00C76F",colorOfSea:"#00ACC2",darkBlueGreen:"#016064",darkBlue:"#013351",grey:"#949494",lightLightBlue:"#E2F9FC"}}},lang:{locales:{ru:Wr["a"]},current:"ru"}}),Zr=r("b6d0"),ea=r("522d"),ta=r("efe7"),ra=r("c2c3"),aa=r("852e"),oa=r.n(aa);a["a"].use(ea["a"]);var sa="apollo-token",na=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_GRAPHQL_HTTP||"http://localhost:8003/api/graphql/",ia=Object(ra["setContext"])((function(e,t){var r=t.headers,a=oa.a.get("csrftoken");return{headers:Object(ue["a"])(Object(ue["a"])({},r),{},{"X-CSRFToken":a?"".concat(a):""})}})),ua={httpEndpoint:na,tokenName:sa,persisting:!1,websocketsOnly:!1,ssr:!1,link:ia};function ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(ta["createApolloClient"])(Object(ue["a"])(Object(ue["a"])({},ua),e)),r=t.apolloClient,a=t.wsClient;r.wsClient=a;var o=new ea["a"]({defaultClient:r,defaultOptions:{$query:{}},errorHandler:function(e){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",e.message)}});return o}var la=r("2106"),ma=r.n(la);a["a"].directive("mask",Zr["a"]),a["a"].use(ma.a,v.a),a["a"].use(Be.a),a["a"].config.productionTip=!1,new a["a"]({router:Jr,store:$,vuetify:Xr,apolloProvider:ca(),render:function(e){return e(m)}}).$mount("#app")},"5bd6":function(e,t,r){"use strict";r("143e")},"9b19":function(e,t,r){e.exports=r.p+"img/logo.e503068b.svg"}});
//# sourceMappingURL=app.e90c56b0.js.map